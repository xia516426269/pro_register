<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script type="text/javascript">
			function update(){
				//0.获取用户输入数据
				var _uid=uid.value;
				var _uname=uname.value;
				var _email=email.value;
				var _phone=phone.value;
				var _user_name=user_name.value;
				var _gender=-1;
				
				//1.获取异步对象
				var xhr=new XMLHttpRequest();
				//4.接收响应 创建监听
				xhr.onreadystatechange=function(){
					if(xhr.readyState==4 && xhr.status==200){
						var r=xhr.responseText;
						if(r==1){
							alert("修改成功")
						}else{
							alert("修改失败")
						}
						if(man.checked){
					    _gender=1
				    }else if(woman.checked){
				    	_gender=0
				    }else{
				     	_gender=-1
				    }
					}
				} 
				//2.创建请求 打开连接
				xhr.open("put",`/pro/v1/update`,true)
				//3.发送请求
				//3.1创建请求主体
				var formdata=`uid=${_uid}&uname=${_uname}&email=${_email}&phone=${_phone}&user_name=${_user_name}&gender=${_gender}`
				//3.2设置请求头信息
				xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded")
				xhr.send(formdata);
			}
		</script>
	</head>
	<body>
		查编号<input type="text" id="uid"><br>
		<!-- <button onclick="search()">查询</button><br> -->
		账户名<input type="text" id="uname"><br>
		邮箱名<input type="text" id="email"><br>
		手机号<input type="text" id="phone"><br>
		用户名<input type="text" id="user_name"><br>
		<input type="radio" name="gender" id="man"><label for="man">男</label>
		<input type="radio" name="gender" id="woman"><label for="woman">女</label>
		<input type="radio" name="gender" id="baomi"><label for="baomi">保密</label><br>
		<button onclick="update()">修改</button>
	</body>
</html>
